{% extends "base.html" %}
{% block content %}

<style>
/* ======================================= */
/*       PREMIUM AI TASK HISTORY PAGE      */
/* ======================================= */

.page-title {
    font-size: 28px;
    font-weight: 600;
    margin-bottom: 8px;
    color:#4c8cff;
    text-shadow:0 0 12px rgba(76,140,255,0.85);
}

.subtitle {
    font-size:15px;
    opacity:.75;
    margin-bottom:25px;
}

.history-container {
    display:flex;
    flex-direction:column;
    gap:18px;
    margin-top:10px;
}

/* Task Item Card */
.task-item {
    background: rgba(255,255,255,0.06);
    backdrop-filter: blur(12px);
    border-radius:16px;
    padding:18px 20px;
    border:1px solid rgba(76,140,255,0.25);
    box-shadow:0 0 20px rgba(76,140,255,0.18);
    animation: fadeInUp .55s ease;
    transition:.2s ease;
}

.task-item:hover {
    transform: scale(1.02);
    box-shadow:0 0 25px rgba(76,140,255,0.35);
}

@keyframes fadeInUp {
    from { opacity:0; transform: translateY(10px); }
    to   { opacity:1; transform: translateY(0); }
}

.task-header {
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
}

.task-user {
    font-weight:600;
    font-size:17px;
    color:#4c8cff;
    text-shadow:0 0 8px rgba(76,140,255,0.6);
}

.task-date {
    opacity:.7;
    font-size:13px;
}

.task-body {
    margin-bottom:10px;
    font-size:15px;
}

.task-status {
    padding:6px 14px;
    border-radius:10px;
    font-size:13px;
    font-weight:600;
    display:inline-block;
    margin-top:8px;
}

.status-pending { background:#ff9d00; color:black; box-shadow:0 0 10px rgba(255,157,0,.6); }
.status-progress { background:#009dff; box-shadow:0 0 10px rgba(0,157,255,.6); }
.status-completed { background:#00d46a; color:black; box-shadow:0 0 10px rgba(0,212,106,.6); }

.no-data {
    background: rgba(255,255,255,0.05);
    padding:20px;
    text-align:center;
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.15);
    margin-top:25px;
    font-size:16px;
    opacity:.7;
}

</style>

<h1 class="page-title">Task History</h1>
<p class="subtitle">
    {% if session.role == "admin" %}
        All assigned tasks (Admin View)
    {% else %}
        Your task updates (Employee View)
    {% endif %}
</p>


{% if tasks|length == 0 %}
    <div class="no-data">No Task History Found</div>
{% else %}

<div class="history-container">

    {% for t in tasks %}
    <div class="task-item">

        <div class="task-header">
            <div class="task-user">
                {% if session.role == "admin" %}
                    ðŸ‘¤ {{ t.User }}
                {% else %}
                    ðŸ“Œ Task
                {% endif %}
            </div>
            <div class="task-date">{{ t.Date }} â€” {{ t.Time }}</div>
        </div>

        <div class="task-body">
            {{ t.Task }}
        </div>

        <div>
            {% if t.Status == "Pending" %}
                <span class="task-status status-pending">Pending</span>
            {% elif t.Status == "In Progress" %}
                <span class="task-status status-progress">In Progress</span>
            {% else %}
                <span class="task-status status-completed">Completed</span>
            {% endif %}
        </div>

    </div>
    {% endfor %}

</div>

{% endif %}

{% endblock %}
